<style>
    .selected-entities-control .ui-select-container>div:first-child {
        max-height: 300px;
        overflow-y: scroll;
        overflow-x: hidden;
    }
</style>


<form name="widgetSelectionForm" novalidate role="form" ng-submit="saveChangesDialog()">
    <div class="modal-header">
        <div class="col-xs-12 col-md-12">
            <h3 class="modal-title text-left"><i class="fa fa-check-square-o" aria-hidden="true"></i> Selected items...</h3>
        </div>
    </div>
    <div class="modal-body">
        <div class="col-xs-12">
            <div class="form-group selected-entities-control">
                <label for="currentSelection">Current selection</label>
                <ui-select multiple tagging ng-model="currentSelection.selected" theme="bootstrap" sortable="false" title="Selected items">
                    <ui-select-match placeholder="No items selected">
                        <div class="text-left" style="margin-right: 15px;font-size: 0.9em;">
                            <span ng-if="$item.value.visible" ng-repeat="(k,v) in $item.value.visible track by $index"><strong>{{k}}:</strong> {{v}}<br></span>
                            <span ng-if="!$item.value.visible">{{$item.key}}</span>
                        </div>
                    </ui-select-match>
                    <ui-select-choices repeat="itemSel in currentSelection.selected | filter:$select.search">
                        {{itemSel.key}}
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
        <div class="col-xs-12 text-left">
            <button type="button" class="btn btn-success btn-sm" ng-click="restoreSelection()" ng-disabled="currentSelection.selected.length === selectedItemsLength" ng-bind="translate('ADF_WIDGET_RESTORE')">Restore</button>
            <button type="button" class="btn btn-danger btn-sm" ng-click="clearSelection()" ng-disabled="currentSelection.selected.length < 1" ng-bind="translate('ADF_WIDGET_CLEAR')">Clear</button>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col-xs-12 col-md-8 text-left">
            <div class="col-xs-3" uib-dropdown ng-if="selectionConfig && selectionConfig.filterTypes">
                <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle>
                    <i class="glyphicon glyphicon-filter pointer"></i> Filter by <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                    <li role="menuitem" ng-repeat="filterType in selectionConfig.filterTypes"><a href="" ng-disabled="currentSelection.selected.length < 1" ng-click="applyFilter(filterType)" title="{{translate('ADF_WIDGET_FILTER')}} {{filterType}}">Selected {{filterType|humanize}}</a></li>
                </ul>
            </div>
            <div class="col-xs-3" uib-dropdown ng-if="selectionConfig && selectionConfig.operationTypes">
                <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle>
                    <i class="glyphicon glyphicon-flash pointer"></i> Exec. Operation <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                    <li role="menuitem" ng-repeat="operationType in selectionConfig.operationTypes"><a href="" ng-disabled="currentSelection.selected.length < 1" ng-click="executeOperation(operationType)" title="{{translate('ADF_WIDGET_FILTER')}} {{operationType}}">{{operationType|humanize}}</a></li>
                </ul>
            </div>
        </div>
        <div class="col-xs-12 col-md-4 text-right">
            <button type="button" class="btn btn-default" ng-click="closeDialog()" ng-bind="translate('ADF_COMMON_CLOSE')">Close</button>
            <button type="submit" class="btn btn-primary" ng-disabled="widgetSelectionForm.$invalid" ng-value="translate('ADF_COMMON_APPLY')">Apply</button>
        </div>
    </div>
</form>